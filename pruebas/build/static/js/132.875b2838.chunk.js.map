{"version":3,"file":"static/js/132.875b2838.chunk.js","mappings":"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","sources":["components/Miniaturas/ThumbnailGallery.js","components/Visualizador/DicomViewer.js","components/Visualizador/VisualizerPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { BASE_URL } from '../config/config';\nimport '../assets/App.css';\n\nconst ThumbnailGallery = ({ onThumbnailClick }) => {\n  const [images, setImages] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  const [tipoEstudio, setTipoEstudio] = useState('');\n  const [region, setRegion] = useState('');\n  const [subregion, setSubregion] = useState('');\n\n  // Define subregiones según la región seleccionada\n  const subregionesOptions = {\n    '02': [\n      { value: '03', label: 'Cervical' },\n      { value: '04', label: 'Torácica' },\n      { value: '05', label: 'Lumbar' },\n      { value: '06', label: 'Sacra' },\n      { value: '07', label: 'Coxis' }\n    ],\n    '26': [\n      { value: '18', label: 'Pelvis Adulto' },\n      { value: '19', label: 'Pelvis Infantil' },\n    ],\n  };\n\n  const fetchImages = useCallback(async (pageNumber) => {\n    if (!tipoEstudio) return;\n  \n    const selectedRegion = subregion || region;\n  \n    try {\n      const query = new URLSearchParams({\n        tipoEstudio: tipoEstudio,\n        ...(selectedRegion && { region: selectedRegion }),\n        page: pageNumber,\n        limit: 9, // Límite de imágenes por página\n      }).toString();\n  \n      const response = await fetch(`${BASE_URL}/thumbnails?${query}`);\n  \n      if (response.ok) {\n        const { images, total } = await response.json();\n  \n        if (pageNumber === 1) {\n          setImages(images);\n        } else {\n          setImages((prevImages) => [...prevImages, ...images]);\n        }\n  \n        // Desactivar más cargas si hemos alcanzado el total\n        if (pageNumber * 9 >= total) {\n          setHasMore(false);\n        } else {\n          setHasMore(true);\n        }\n  \n        setLoaded(true);\n      } else {\n        setError(\"Error al obtener las imágenes\");\n      }\n    } catch (error) {\n      setError(\"Error en la solicitud de imágenes: \" + error.message);\n    }\n  }, [region, subregion, tipoEstudio]);  \n\n  useEffect(() => {\n    // Resetear estado de imágenes y paginación al cambiar filtros\n    setImages([]);\n    setPage(1);\n    setHasMore(true);\n    setLoaded(false);\n    fetchImages(1);\n  }, [fetchImages, tipoEstudio, region, subregion]);\n\n  const handleLoadMore = () => {\n    if (hasMore) {\n      const nextPage = page + 1;\n      setPage(nextPage);\n      fetchImages(nextPage);\n    }\n  };\n\n  const handleRegionChange = (e) => {\n    setRegion(e.target.value);\n    setSubregion(''); // Resetear subregión al cambiar la región\n  };\n\n  const handleSubregionChange = (e) => {\n    setSubregion(e.target.value);\n  };\n\n  if (error) {\n    return <p>{error}</p>;\n  }\n\n  return (\n    <div className=\"thumbnail-gallery-container\" style={{ marginLeft: '100px', maxWidth: '1200px', margin: '0 auto' }}>\n      <h1 className=\"text-5xl font-extrabold mb-4 animate-reveal\" style={{ color: '#666666', marginTop: '20px', fontWeight: '900', fontFamily: 'Poppins', textAlign: 'center' }}>\n        Estudios médicos\n      </h1>\n\n      <div className=\"filters\" style={filterStyle}>\n        <label>\n          Tipo de Estudio:\n          <select value={tipoEstudio} onChange={(e) => setTipoEstudio(e.target.value)}>\n            <option value=\"\">Seleccione</option>\n            <option value=\"01\">Radiografía</option>\n            <option value=\"02\">Tomografía Computarizada</option>\n            <option value=\"03\">Resonancia Magnética</option>\n            <option value=\"04\">Ultrasonido</option>\n            <option value=\"05\">Mamografía</option>\n            <option value=\"06\">Angiografía</option>\n            <option value=\"07\">Medicina Nuclear</option>\n            <option value=\"08\">Medio de contraste</option>\n            <option value=\"09\">Fluoroscopia</option>\n          </select>\n        </label>\n\n        <label>\n          Región:\n          <select value={region} onChange={handleRegionChange}>\n            <option value=\"\">Seleccione</option>\n            <option value=\"00\">Desconocido</option>\n            <option value=\"02\">Columna Vertebral</option>\n            <option value=\"26\">Pelvis</option>\n          </select>\n        </label>\n\n        {region && subregionesOptions[region] && (\n          <label>\n            Subregión:\n            <select value={subregion} onChange={handleSubregionChange}>\n              <option value=\"\">Seleccione</option>\n              {subregionesOptions[region].map(option2 => (\n                <option key={option2.value} value={option2.value}>\n                  {option2.label}\n                </option>\n              ))}\n            </select>\n          </label>\n        )}\n      </div>\n\n      <div className=\"thumbnail-gallery\" style={{ marginTop: '20px' }}>\n        {loaded ? (\n          images.length > 0 ? (\n            <div style={galleryStyle}>\n              {images.map((image, index) => {\n\n                return (\n                  <div\n                    key={index}\n                    style={thumbnailContainerStyle}\n                    onClick={() => onThumbnailClick(image)}\n                    onContextMenu={(e) => e.preventDefault()}\n                  >\n                    <img\n                      src={image}\n                      alt={`Thumbnail ${index}`}\n                      style={thumbnailStyle}\n                      onError={(e) => { e.currentTarget.src = 'https://via.placeholder.com/150'; }}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <p>No hay imágenes disponibles.</p>\n          )\n        ) : (\n          <p>Seleccione el tipo de estudio...</p>\n        )}\n        {hasMore && (\n          <button onClick={handleLoadMore} style={buttonStyle}>Cargar más</button>\n        )}\n      </div>\n\n    </div>\n  );\n};\n\n// Estilos para la galería de miniaturas\nconst galleryStyle = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))', // Se ajusta el tamaño de las columnas según el ancho\n  gap: '20px',\n  justifyContent: 'center',\n  padding: '20px',\n  border: '1px solid #ddd',\n  width: '100%', // Asegura que la galería ocupe el 100% del ancho disponible\n  boxSizing: 'border-box', // Incluye el padding y el borde en el ancho total\n};\n\nconst thumbnailStyle = {\n  width: '100%', // Permite que la miniatura ocupe el 100% del ancho del contenedor\n  height: 'auto', // Mantiene la proporción de la imagen\n  objectFit: 'cover',\n};\n\nconst thumbnailContainerStyle = {\n  cursor: 'pointer',\n  overflow: 'hidden',\n  position: 'relative',\n  borderRadius: '5px',\n  boxShadow: '0 2px 5px rgba(0, 0, 0, 0.2)', // Añade una sombra para mejorar la apariencia\n  transition: 'transform 0.2s', // Transición suave para el hover\n};\n\nconst thumbnailContainerHoverStyle = {\n  transform: 'scale(1.05)', // Efecto de zoom al pasar el ratón\n};\n\nconst filterStyle = {\n  marginBottom: '10px',\n  display: 'flex',\n  justifyContent: 'center', // Centra el filtro\n};\n\nconst buttonStyle = {\n  display: 'block',\n  margin: '20px auto',\n  padding: '10px 20px',\n  fontSize: '16px',\n  cursor: 'pointer',\n  backgroundColor: '#38b2ac', // Color de fondo para los botones\n  color: '#ffffff', // Color del texto\n  border: 'none', // Sin borde\n  borderRadius: '5px', // Bordes redondeados\n  transition: 'background-color 0.3s', // Transición suave para el hover\n};\n\nconst buttonHoverStyle = {\n  backgroundColor: '#26798e', // Cambia el color al pasar el ratón\n};\n\nexport default ThumbnailGallery;\n","import React, { useState, useEffect, useRef } from 'react';\nimport cornerstone from 'cornerstone-core';\nimport cornerstoneTools from 'cornerstone-tools';\nimport dicomParser from 'dicom-parser';\nimport cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader';\nimport { BASE_URL } from '../config/config';\nimport { ZoomTool, PanTool, LengthTool, RotateTool } from 'cornerstone-tools';\n\n// Configurar el cargador de imágenes DICOM\ncornerstoneWADOImageLoader.external.cornerstone = cornerstone;\ncornerstoneWADOImageLoader.external.dicomParser = dicomParser;\n\n// Configurar herramientas\nconst configureTools = () => {\n  cornerstoneTools.addTool(ZoomTool);\n  cornerstoneTools.addTool(PanTool);\n  cornerstoneTools.addTool(LengthTool);\n  cornerstoneTools.addTool(RotateTool); // Asumiendo que existe RotateTool\n\n  cornerstoneTools.setToolActive('Zoom', { mouseButtonMask: 1 });\n  cornerstoneTools.setToolActive('Pan', { mouseButtonMask: 1 });\n  cornerstoneTools.setToolActive('Length', { mouseButtonMask: 1 });\n  cornerstoneTools.setToolActive('Rotate', { mouseButtonMask: 1 }); // Asumiendo que existe RotateTool\n};\n\nconst DicomViewer = ({ fileName }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const elementRef = useRef(null);\n\n  useEffect(() => {\n    const element = elementRef.current;\n\n    if (element && fileName) {\n      const imageId = `wadouri:${BASE_URL}/image/${fileName}`;\n\n      const loadImage = async () => {\n        setLoading(true);\n        setError(null);\n\n        try {\n          cornerstone.enable(element);\n          configureTools();\n\n          const image = await cornerstone.loadImage(imageId);\n          cornerstone.displayImage(element, image);\n\n          // Activar la herramienta de zoom por defecto\n          cornerstoneTools.setToolActive('Zoom', { mouseButtonMask: 1 });\n\n        } catch (error) {\n          setError('Error al cargar la imagen DICOM.');\n        } finally {\n          setLoading(false);\n        }\n      };\n\n      loadImage();\n\n      return () => {\n        if (element) {\n          cornerstone.disable(element);\n        }\n      };\n    }\n  }, [fileName]);\n\n  const zoomIn = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.scale *= 1.2; // Incrementar el nivel de zoom\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const zoomOut = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.scale /= 1.2; // Decrementar el nivel de zoom\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const moveLeft = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.translation.x -= 10; // Mover a la izquierda\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const moveRight = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.translation.x += 20; // Mover a la derecha\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const moveUp = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.translation.y -= 20; // Mover hacia arriba\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const moveDown = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.translation.y += 20; // Mover hacia abajo\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const rotateClockwise = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.rotation += 0.75; // Rotar en sentido horario\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  const rotateCounterClockwise = () => {\n    const viewport = cornerstone.getViewport(elementRef.current);\n    viewport.rotation -= 0.75; // Rotar en sentido antihorario\n    cornerstone.setViewport(elementRef.current, viewport);\n  };\n\n  return (\n    <div className=\"dicom-viewer-container\">\n      <div\n        onContextMenu={(e) => e.preventDefault()}\n        ref={elementRef}\n        className=\"dicom-viewer\"\n        style={{ width: '100%', height: '100%' }}\n      >\n        {loading && <p>Cargando imagen DICOM...</p>}\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n      </div>\n\n      <div className=\"tool-buttons\" style={{ marginTop: '10px', display: 'flex', justifyContent: 'center', gap: '10px' }}>\n        <button onClick={zoomIn}>Zoom +</button>\n        <button onClick={zoomOut}>Zoom -</button>\n        <button onClick={moveDown}>Mover ↑</button>\n        <button onClick={rotateCounterClockwise}>Rotar ←</button>\n        <button onClick={rotateClockwise}>Rotar →</button>\n        <button onClick={moveRight}>Mover ←</button>\n        <button onClick={moveUp}>Mover ↓</button>\n        <button onClick={moveLeft}>Mover →</button>\n      </div>\n    </div>\n  );\n\n};\n\nexport default DicomViewer;","import React, { useState, useEffect } from 'react';\nimport ThumbnailGallery from '../Miniaturas/ThumbnailGallery';\nimport DicomViewer from './DicomViewer';\nimport { useNavigate } from 'react-router-dom'; // Para la navegación\nimport Header from '../assets/Header';\nimport Footer from '../assets/Footer';\nimport '../assets/App.css';\nimport { useAuth } from '../../AuthContext'; // Asegúrate de que la ruta sea correcta\n\nfunction VisualizerPage() {\n  const [selectedImage, setSelectedImage] = useState(null);\n  const navigate = useNavigate();\n  const { isAuthenticated } = useAuth(); // Usa el contexto de autenticación\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login'); // Redirige al login si no está autenticado\n    }\n  }, [isAuthenticated, navigate]);\n\n  const handleThumbnailClick = (image) => {\n    const fileName = image.split('/').pop().replace('.jpg', '.dcm');\n    setSelectedImage(fileName);\n  };\n\n  return (\n    <div className=\"visualizer-page\">\n      <Header />\n      <div className=\"next-module\" />\n\n      <div className=\"content\">\n        <div className=\"thumbnail-gallery\">\n          <ThumbnailGallery onThumbnailClick={handleThumbnailClick} />\n        </div>\n        <div className=\"dicom-viewer\">\n          {selectedImage ? (\n            <DicomViewer fileName={selectedImage} />\n          ) : (\n            <p>Selecciona una miniatura para ver la imagen DICOM.</p>\n          )}\n        </div>\n      </div>\n      <div className=\"next-module\" />\n      <Footer />\n    </div>\n  );\n}\n\nexport default VisualizerPage;\n"],"names":["galleryStyle","display","gridTemplateColumns","gap","justifyContent","padding","border","width","boxSizing","thumbnailStyle","height","objectFit","thumbnailContainerStyle","cursor","overflow","position","borderRadius","boxShadow","transition","filterStyle","marginBottom","buttonStyle","margin","fontSize","backgroundColor","color","_ref","onThumbnailClick","images","setImages","useState","loaded","setLoaded","error","setError","page","setPage","hasMore","setHasMore","tipoEstudio","setTipoEstudio","region","setRegion","subregion","setSubregion","subregionesOptions","value","label","fetchImages","useCallback","async","selectedRegion","query","URLSearchParams","pageNumber","limit","toString","response","fetch","BASE_URL","ok","total","json","prevImages","message","useEffect","_jsx","children","_jsxs","className","style","marginLeft","maxWidth","marginTop","fontWeight","fontFamily","textAlign","onChange","e","target","map","option2","length","image","index","onClick","onContextMenu","preventDefault","src","alt","onError","currentTarget","handleLoadMore","nextPage","cornerstoneWADOImageLoader","cornerstone","dicomParser","fileName","loading","setLoading","elementRef","useRef","element","current","imageId","cornerstoneTools","ZoomTool","PanTool","LengthTool","RotateTool","mouseButtonMask","loadImage","ref","zoomIn","viewport","scale","zoomOut","moveDown","translation","y","rotateCounterClockwise","rotation","rotateClockwise","moveRight","x","moveUp","moveLeft","selectedImage","setSelectedImage","navigate","useNavigate","isAuthenticated","useAuth","Header","ThumbnailGallery","split","pop","replace","DicomViewer","Footer"],"sourceRoot":""}