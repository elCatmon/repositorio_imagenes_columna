"use strict";(self.webpackChunkbdmdm=self.webpackChunkbdmdm||[]).push([[216],{6216:(e,o,i)=>{i.r(o),i.d(o,{default:()=>t});var n=i(5043),a=i(9596),s=i(2297),r=i(6351),l=(i(1047),i(579));const t=()=>{const[e,o]=(0,n.useState)({tipoEstudio:"",region:"",folio:"",edad:"",sexo:"",archivosAnonimizados:[],archivosOriginales:[]}),i=(0,n.useRef)(null),t=(0,n.useRef)(null),[c,d]=(0,n.useState)([]),[h,u]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[m,j]=(0,n.useState)(!1),v=e=>{const{name:i,value:n,type:a,checked:s}=e.target;o((e=>({...e,[i]:"checkbox"===a?s?"S\xed":"No":n})))},g=e=>{const{name:i}=e.target,n=Array.from(e.target.files),a=n.filter((e=>"image/jpeg"===e.type&&e.size<=20971520));a.length!==n.length&&alert("Solo se permiten im\xe1genes JPG de m\xe1ximo 20MB."),o((e=>({...e,[i]:a})))};return(0,l.jsxs)("div",{children:[(0,l.jsx)(s.A,{}),(0,l.jsxs)("div",{className:"content",onContextMenu:e=>e.preventDefault(),children:[(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h2",{children:"Formulario de Importaci\xf3n"}),(0,l.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),!(()=>{const{tipoEstudio:o,folio:i,archivosOriginales:n}=e;return o&&i&&0!==n.length?(u(""),!0):(u("Por favor complete todos los campos requeridos y seleccione al menos un archivo."),!1)})())return;j(!0);const s=Math.floor(1e10*Math.random()).toString().padStart(10,"0"),r=e.archivosAnonimizados.map((e=>URL.createObjectURL(e))),l=new FormData;l.append("estudio_ID",s),l.append("folio",e.folio),l.append("estudio",e.tipoEstudio),l.append("region",e.region),l.append("sexo",e.sexo),l.append("edad",e.edad),e.archivosAnonimizados.length>0&&e.archivosAnonimizados.forEach((e=>{l.append("archivosAnonimizados",e)})),e.archivosOriginales.length>0&&e.archivosOriginales.forEach((e=>{l.append("archivosOriginales",e)}));try{const n=await fetch(`${a.C}/importar`,{method:"POST",body:l});if(!n.ok){const e=await n.text();throw new Error(`Error al enviar los datos: ${e}`)}x("Datos enviados correctamente"),u("");const c={miniaturas:r,noOperacion:s,folio:e.folio,fecha:e.fechaEstudio,tipoEstudio:e.tipoEstudio,numeroArchivos:e.archivosOriginales.length};d((e=>[...e,c])),o({tipoEstudio:"",folio:"",region:"",edad:"",sexo:"",archivosAnonimizados:[],archivosOriginales:[]}),i.current&&(i.current.value=""),t.current&&(t.current.value="")}catch(h){u(`Error al enviar los datos: ${h.message}`),x("")}finally{j(!1)}},encType:"multipart/form-data",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Folio:"}),(0,l.jsx)("input",{type:"text",name:"folio",value:e.folio,onChange:v,maxLength:12,required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Tipo de estudio:"}),(0,l.jsxs)("select",{name:"tipoEstudio",value:e.tipoEstudio,onChange:v,required:!0,children:[(0,l.jsx)("option",{value:"00",children:"Seleccione"}),(0,l.jsx)("option",{value:"01",children:"Radiograf\xeda"}),(0,l.jsx)("option",{value:"02",children:"Tomograf\xeda Computarizada"}),(0,l.jsx)("option",{value:"03",children:"Resonancia Magn\xe9tica"}),(0,l.jsx)("option",{value:"04",children:"Ultrasonido"}),(0,l.jsx)("option",{value:"05",children:"Mamograf\xeda"}),(0,l.jsx)("option",{value:"06",children:"Angiograf\xeda"}),(0,l.jsx)("option",{value:"07",children:"Medicina Nuclear"}),(0,l.jsx)("option",{value:"08",children:"Radio Terapia"}),(0,l.jsx)("option",{value:"09",children:"Fluoroscopia"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Region:"}),(0,l.jsxs)("select",{name:"region",value:e.region,onChange:v,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Seleccione"}),(0,l.jsx)("option",{value:"00",children:"Desconocido"}),(0,l.jsx)("option",{value:"02",children:"Columna Vertebral"}),(0,l.jsx)("option",{value:"03",children:"Cervical"}),(0,l.jsx)("option",{value:"04",children:"Tor\xe1cica"}),(0,l.jsx)("option",{value:"05",children:"Lumbar"}),(0,l.jsx)("option",{value:"06",children:"Sacra"}),(0,l.jsx)("option",{value:"07",children:"Coxis"}),(0,l.jsx)("option",{value:"18",children:"Pelvis Adulto"}),(0,l.jsx)("option",{value:"19",children:"Pelvis Infantil"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Edad:"}),(0,l.jsxs)("select",{name:"edad",value:e.edad,onChange:v,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Seleccione"}),(0,l.jsx)("option",{value:"0",children:"Desconocido"}),(0,l.jsx)("option",{value:"1",children:"Lactante menores de 1 a\xf1o"}),(0,l.jsx)("option",{value:"2",children:"Prescolar 1-5"}),(0,l.jsx)("option",{value:"3",children:"Infante 6-12"}),(0,l.jsx)("option",{value:"4",children:"Adolescente 13-18"}),(0,l.jsx)("option",{value:"5",children:"Adulto joven 19-26"}),(0,l.jsx)("option",{value:"6",children:"Adulto 27-59"}),(0,l.jsx)("option",{value:"7",children:"Adulto mayor 60+"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Sexo:"}),(0,l.jsxs)("select",{name:"sexo",value:e.sexo,onChange:v,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Seleccione"}),(0,l.jsx)("option",{value:"0",children:"Desconocido"}),(0,l.jsx)("option",{value:"1",children:"Masculino"}),(0,l.jsx)("option",{value:"2",children:"Femenino"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Archivos Anonimizados:"}),(0,l.jsx)("input",{type:"file",name:"archivosAnonimizados",onChange:g,multiple:!0,accept:"image/jpeg",ref:i})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Archivos Originales:"}),(0,l.jsx)("input",{type:"file",name:"archivosOriginales",onChange:g,multiple:!0,accept:"image/jpeg",ref:t})]}),m&&(0,l.jsx)("p",{children:"Cargando archivos, por favor espere..."}),p&&(0,l.jsx)("p",{className:"success-message",children:p}),h&&(0,l.jsx)("p",{className:"error-message",children:h}),(0,l.jsx)("button",{type:"submit",className:"btn btn-success",children:"Enviar"})]})]}),(0,l.jsxs)("div",{className:"table-section",children:[(0,l.jsx)("h2",{children:"Datos Importados"}),(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Miniatura"}),(0,l.jsx)("th",{children:"No. Operaci\xf3n"}),(0,l.jsx)("th",{children:"Folio"}),(0,l.jsx)("th",{children:"Tipo de Estudio"}),(0,l.jsx)("th",{children:"N\xfamero de Archivos"})]})}),(0,l.jsx)("tbody",{children:c.map(((e,o)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.miniaturas.map(((e,o)=>(0,l.jsx)("img",{src:e,alt:"Miniatura",width:"50"},o)))}),(0,l.jsx)("td",{children:e.noOperacion}),(0,l.jsx)("td",{children:e.folio}),(0,l.jsx)("td",{children:e.tipoEstudio}),(0,l.jsx)("td",{children:e.numeroArchivos})]},o)))})]})]})]}),(0,l.jsx)("div",{className:"next-module"}),(0,l.jsx)(r.A,{})]})}}}]);
//# sourceMappingURL=216.75006ae7.chunk.js.map