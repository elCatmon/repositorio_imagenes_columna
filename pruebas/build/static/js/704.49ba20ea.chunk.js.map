{"version":3,"file":"static/js/704.49ba20ea.chunk.js","mappings":"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","sources":["components/dataset/datasetDownload.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BASE_URL } from '../config/config';\nimport Header from '../assets/Header';\nimport Footer from '../assets/Footer';\nimport '../assets/App.css';\nimport './datasetDownload.css';\n\nconst StudyForm = () => {\n  const [formData, setFormData] = useState({\n    tipoEstudio: '',\n    region: '',\n    subregion: '',\n    proyeccion: '',\n    formato: '',\n    dimensionX: '',\n    dimensionY: ''\n  });\n  const [showDimensions, setShowDimensions] = useState(false);\n  const [isLoading, setIsLoading] = useState(false); // Nuevo estado para la carga\n\n  useEffect(() => {\n    // Mostrar campos de dimensiones si el formato es JPG o DICOM & JPG\n    setShowDimensions(formData.formato === 'jpg' || formData.formato === 'both');\n  }, [formData.formato]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true); // Mostrar la animación de carga al enviar el formulario\n    if (formData.subregion !== '') {\n      formData.region = formData.subregion;\n    }\n    // Construir la URL de la solicitud\n    const queryParams = new URLSearchParams({\n      type: formData.formato,\n      tipoEstudio: formData.tipoEstudio,\n      region: formData.region,\n      proyeccion: formData.proyeccion,\n      dimensionX: formData.dimensionX,\n      dimensionY: formData.dimensionY,\n    }).toString();\n\n    const url = `${BASE_URL}/dataset/descarga?${queryParams}`;\n\n    try {\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/zip',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Error en la solicitud: ' + response.statusText);\n      }\n\n      // Recibir el archivo como un blob\n      const blob = await response.blob();\n\n      // Crear una URL de descarga a partir del blob\n      const downloadUrl = window.URL.createObjectURL(blob);\n\n      // Crear un enlace temporal para descargar el archivo\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.setAttribute('download', 'dataset.zip'); // Nombre del archivo\n      document.body.appendChild(link);\n      link.click();\n      link.remove(); // Eliminar el enlace después de hacer clic\n    } catch (error) {\n      console.error('Error al hacer la solicitud:', error);\n    } finally {\n      setIsLoading(false); // Ocultar la animación de carga cuando la solicitud finalice\n    }\n  };\n\n  return (\n\n    <div>\n      <Header />\n      <div className=\"next-module\" />\n      <h2>Opciones de descarga del conjunto de datos</h2>\n      <form onSubmit={handleSubmit} onContextMenu={(e) => e.preventDefault()}>\n        {/* Campo Tipo de Estudio */}\n        <div style={{ marginBottom: '15px' }}>\n          <label style={{ fontWeight: 'bold' }} htmlFor=\"tipoEstudio\">Tipo de Estudio:</label>\n          <select\n            id=\"tipoEstudio\"\n            name=\"tipoEstudio\"\n            value={formData.tipoEstudio}\n            onChange={handleChange}\n            required\n          >\n            <option value=\"00\">Seleccione</option>\n            <option value=\"\">Todos</option>\n            <option value=\"01\">Radiografía</option>\n            <option value=\"02\">Tomografía Computarizada</option>\n            <option value=\"03\">Resonancia Magnética</option>\n            <option value=\"04\">Ultrasonido</option>\n            <option value=\"05\">Mamografía</option>\n            <option value=\"06\">Angiografía</option>\n            <option value=\"07\">Medicina Nuclear</option>\n            <option value=\"08\">Radio Terapia</option>\n            <option value=\"09\">Fluoroscopia</option>\n          </select>\n        </div>\n\n        {/* Campo Región */}\n        <div className=\"form-group\">\n          <label style={{ fontWeight: 'bold' }}>Región:</label>\n          <select\n            name=\"region\"\n            value={formData.region}\n            onChange={handleChange}\n          >\n            <option value=\"\">Todas</option>\n            <option value=\"02\">Columna Vertebral</option>\n            <option value=\"17\">Pelvis</option>\n          </select>\n        </div>\n        <div className=\"form-group\">\n          <label style={{ fontWeight: 'bold' }}>Proyección:</label>\n          <select\n            name=\"proyeccion\"\n            value={formData.proyeccion}\n            onChange={handleChange}\n          >\n            <option value=\"\">Todas</option>\n            <option value=\"01\">Postero Anterior</option>\n            <option value=\"02\">Antero Posterior</option>\n            <option value=\"03\">Obliqua</option>\n            <option value=\"04\">Lateral Izquierda</option>\n            <option value=\"05\">Lateral Derecha</option>\n            <option value=\"06\">Especial</option>\n            <option value=\"07\">Comparativa</option>\n          </select>\n        </div>\n\n        {/* Campo Formato */}\n        <div style={{ marginBottom: '15px' }}>\n          <label style={{ fontWeight: 'bold' }} htmlFor=\"formato\">Formato:</label>\n          <select\n            id=\"formato\"\n            name=\"formato\"\n            value={formData.formato}\n            onChange={handleChange}\n            required\n          >\n            <option value=\"\">Seleccione</option>\n            <option value=\"dcm\">DICOM</option>\n          </select>\n        </div>\n\n        {/* Botón de envío */}\n        <button\n          type=\"submit\"\n          style={{ padding: '10px 15px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '5px', cursor: 'pointer' }}\n        >\n          Generar dataset\n        </button>\n      </form>\n\n      {/* Mostrar la animación de carga */}\n      {isLoading && (\n        <div style={{ marginTop: '20px', textAlign: 'center' }}>\n          <p>Esto puede tardar un rato por favor espera...</p>\n          <div className=\"spinner\" style={{ border: '4px solid rgba(0,0,0,.1)', borderLeftColor: '#4CAF50', borderRadius: '50%', width: '40px', height: '40px', animation: 'spin 1s linear infinite' }}></div>\n        </div>\n      )}\n\n      {/* Añadir la animación CSS para el spinner */}\n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}</style>\n      <div className=\"next-module\" />\n      <Footer />\n    </div>\n  );\n};\n\nexport default StudyForm;\n"],"names":["StudyForm","formData","setFormData","useState","tipoEstudio","region","subregion","proyeccion","formato","dimensionX","dimensionY","showDimensions","setShowDimensions","isLoading","setIsLoading","useEffect","handleChange","e","name","value","target","prevState","_jsxs","children","_jsx","Header","className","onSubmit","async","preventDefault","queryParams","URLSearchParams","type","toString","url","BASE_URL","response","fetch","method","headers","ok","Error","statusText","blob","downloadUrl","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","remove","error","console","onContextMenu","style","marginBottom","fontWeight","htmlFor","id","onChange","required","padding","backgroundColor","color","border","borderRadius","cursor","marginTop","textAlign","borderLeftColor","width","height","animation","Footer"],"sourceRoot":""}