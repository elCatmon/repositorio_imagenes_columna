"use strict";(self.webpackChunkbdmdm=self.webpackChunkbdmdm||[]).push([[692],{6692:(e,n,s)=>{s.r(n),s.d(n,{default:()=>h});var o=s(5043),i=s(2297),a=s(6351),c=s(2963),l=s.n(c),r=s(9596),d=s(579);const t=e=>{let{folio:n,fecha_recepcion:s,Correo:o,show:i,onClose:a}=e;const c=()=>{console.log("Cancelar Donaci\xf3n")};return(0,d.jsxs)(l(),{isOpen:i,onRequestClose:a,style:{content:{width:"80%",maxWidth:"500px",maxHeight:"600px",margin:"auto",padding:"20px",borderRadius:"8px",zIndex:1e3},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:[(0,d.jsxs)("h2",{children:["Donacion: ",n]}),(0,d.jsxs)("p",{className:"modalID",children:["Fecha de recepcion: ",s]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"modalText",children:"Si el proceso de digitalizacion fue realizado"}),(0,d.jsx)("button",{className:"btnModal",onClick:()=>{console.log(s,o),fetch(`${r.C}/api/estudios/confirmar-digitalizacion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:o,fecha:s,folio:n})}).then((e=>e.json())).then((e=>{console.log("Correo enviado:",e),alert("Correo enviado:",e)})).catch((e=>{console.error("Error al enviar el correo:",e)}))},children:"Enviar Correo"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"modalText",children:"Si los estudios ya han sido anonimizados"}),(0,d.jsx)("button",{className:"btnModal",onClick:c,children:"Enviar Correo"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"modalText",children:"Si el usuario ya no desea que sus donaciones se encuentren en la biblioteca"}),(0,d.jsx)("button",{className:"btnModal",onClick:c,children:"Cancelar Donaci\xf3n"})]}),(0,d.jsx)("div",{children:(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:"btnModal",onClick:a,style:{marginTop:"20px",padding:"10px"},children:"Cerrar"})})})]})};const h=function(){const[e,n]=(0,o.useState)([]),[s,c]=(0,o.useState)(!1),[l,h]=(0,o.useState)(null),[x,j]=(0,o.useState)({folio:"",correo:"",curp:"",FechaRecepcion:""}),[p,u]=(0,o.useState)(!1),[m,b]=(0,o.useState)({folio:"",fecha_Recepcion:"",correoD:""}),f=e=>{const{name:n,value:s}=e.target;j((e=>({...e,[n]:s})))};return(0,d.jsxs)("div",{children:[(0,d.jsx)(i.A,{}),(0,d.jsx)("div",{className:"next-module",children:(0,d.jsxs)("div",{className:"contenido-principal",children:[(0,d.jsx)("div",{className:"columna-formulario",children:(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),h(null);const s=new URLSearchParams;x.folio&&s.append("folio",x.folio),x.correo&&s.append("correo",x.correo),x.curp&&s.append("curp",x.curp),x.FechaRecepcion&&s.append("FechaRecepcion",x.FechaRecepcion);try{const e=await fetch(`${r.C}/api/estudios/consulta?${s.toString()}`);if(!e.ok)throw new Error("Error en la solicitud");const o=e.headers.get("content-type");if(o&&o.includes("application/json")){const s=await e.json();n(s||[])}}catch(l){h("Error al buscar estudios.")}finally{c(!1)}},children:[(0,d.jsx)("h2",{children:"Buscar donaciones"}),(0,d.jsxs)("label",{children:["Folio:",(0,d.jsx)("input",{name:"folio",value:x.folio,onChange:f,className:"input-field"})]}),(0,d.jsxs)("label",{children:["Correo:",(0,d.jsx)("input",{type:"email",name:"correo",value:x.correo,onChange:f,className:"input-field"})]}),(0,d.jsxs)("label",{children:["CURP:",(0,d.jsx)("input",{name:"curp",value:x.curp,onChange:f,className:"input-field"})]}),(0,d.jsxs)("label",{children:["Fecha de Recepci\xf3n:",(0,d.jsx)("input",{type:"date",name:"FechaRecepcion",value:x.FechaRecepcion,onChange:f,className:"input-field"})]}),(0,d.jsx)("button",{className:"btnBuscarDoancion",type:"submit",children:"Buscar"})]})}),(0,d.jsxs)("div",{className:"columna-tabla",children:[(0,d.jsx)("h2",{children:"Lista de donaciones"}),s?(0,d.jsx)("p",{children:"Loading..."}):l?(0,d.jsx)("p",{children:l}):(0,d.jsx)("div",{className:"tablaConsultDonaciones-wrapper",children:(0,d.jsxs)("table",{className:"tablaConsultDonaciones",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"table-headerDonaiones",children:"Folio"}),(0,d.jsx)("th",{className:"table-headerDonaiones",children:"Fecha de Recepci\xf3n"}),(0,d.jsx)("th",{className:"table-headerDonaiones",children:"Fecha de Devoluci\xf3n"}),(0,d.jsx)("th",{className:"table-headerDonaiones",children:"Donador"}),(0,d.jsx)("th",{className:"table-headerDonaiones",children:"Detalles del Estudio"}),(0,d.jsx)("th",{className:"table-headerDonaiones",children:"Operaciones"})]})}),(0,d.jsx)("tbody",{children:e.length>0?e.map((e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"informacion",children:e.folio}),(0,d.jsx)("td",{className:"informacion",children:new Date(e.fechaRecepcion).toISOString().split("T")[0].split("-").reverse().join("/")}),(0,d.jsx)("td",{className:"informacion",children:e.fechaDevolucion?new Date(e.fechaDevolucion).toISOString().split("T")[0].split("-").reverse().join("/"):"N/A"}),(0,d.jsx)("td",{className:"informacion",children:e.curp}),(0,d.jsx)("td",{className:"detalles",children:(0,d.jsx)("ul",{children:e.detallesEstudios&&e.detallesEstudios.length>0?e.detallesEstudios.map(((e,n)=>(0,d.jsx)("li",{children:(0,d.jsx)("table",{children:(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("strong",{children:"ID:"})}),(0,d.jsx)("td",{children:e.id||"No disponible"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("strong",{children:"Tipo de Estudio:"})}),(0,d.jsx)("td",{children:e.tipoEstudio||"No disponible"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("strong",{children:"Cantidad de Im\xe1genes:"})}),(0,d.jsx)("td",{children:e.cantidadImagenes||"No disponible"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("strong",{children:"Observaciones:"})}),(0,d.jsx)("td",{children:e.observaciones||"No disponible"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("strong",{children:"Donaci\xf3n:"})}),(0,d.jsx)("td",{children:e.esDonacion?"S\xed":"No"})]})]})})},n))):(0,d.jsx)("li",{children:"No hay detalles disponibles"})})}),(0,d.jsx)("td",{className:"informacion",children:(0,d.jsx)("button",{className:"btnOperaciones",onClick:()=>{return n=e.folio,s=e.fechaRecepcion,o=e.correo,b({folio:n,fecha_Recepcion:s,correoD:o}),console.log(n,s,o),void u(!0);var n,s,o},children:"Acciones"})})]},e.folio))):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"4",children:"No se encontraron donaciones."})})})]})})]})]})}),(0,d.jsx)("div",{className:"next-module"}),(0,d.jsx)("div",{className:"next-module",children:(0,d.jsx)(a.A,{})}),(0,d.jsx)(t,{folio:m.folio,fecha_recepcion:m.fecha_Recepcion,Correo:m.correoD,show:p,onClose:()=>{u(!1)}})]})}}}]);
//# sourceMappingURL=692.872f3b7c.chunk.js.map